<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Workway</title>
    <style>
        /* Einfaches Design für die Buttons */
        button {
            background-color: #4CAF50;
            color: white;
            padding: 10px 20px;
            border: none;
            cursor: pointer;
            margin-left: 10px;
            border-radius: 5px;
        }
        button:hover {
            background-color: #45a049;
        }
        #result {
            margin-top: 20px;
            font-size: 20px;
        }
        #placesInputContainer {
            margin-bottom: 20px;
        }
        .placesInputRow {
            display: flex;
            align-items: center;
        }
        .placesInputRow input {
            margin-right: 10px;
            padding: 5px;
        }
    </style>
</head>
<body>
    <h1>Arbeitsweg Rechner</h1>
    <div id="placesInputContainer" class="placesInputRow">
        <input type="text" id="placesInput" placeholder="Gib die Orte ein, z.B. Olpe, Siegen, Kirchveischede">
        <button onclick="calculateRoute()">Berechnen</button>
        <button onclick="copyPlaces()">Kopieren Orte</button>
    </div>

    <div id="result">
        <!-- Das Ergebnis der Berechnung wird hier erscheinen -->
    </div>

    <div id="map" style="height: 400px; width: 100%; margin-top: 20px;"></div>

    <script>
        let geojsonData = {};  // Hier wird später das GeoJSON geladen
        let markers = []; // Array für die Marker

        // Simuliertes GeoJSON für Testzwecke
        geojsonData = {
            "type": "FeatureCollection",
            "features": [
                {
                    "type": "Feature",
                    "properties": { "name": "Olpe" },
                    "geometry": { "type": "Point", "coordinates": [7.8661, 51.0828] }
                },
                {
                    "type": "Feature",
                    "properties": { "name": "Siegen" },
                    "geometry": { "type": "Point", "coordinates": [8.0235, 50.8757] }
                },
                {
                    "type": "Feature",
                    "properties": { "name": "Kirchveischede" },
                    "geometry": { "type": "Point", "coordinates": [7.9748, 51.0822] }
                }
            ]
        };

        // Berechnung der Route und der Distanzen
        function calculateRoute() {
            const inputField = document.getElementById('placesInput');
            const places = inputField.value.split(',').map(place => place.trim());

            if (places.length < 2) {
                alert("Bitte mindestens zwei Orte eingeben!");
                return;
            }

            const coordinates = [];
            for (let i = 0; i < places.length; i++) {
                const place = places[i];
                const coords = getCoordinatesFromGeoJson(place);
                if (coords) {
                    coordinates.push(coords);
                } else {
                    alert(`Kein Ergebnis für: ${place}`);
                    return;
                }
            }

            let totalDistance = 0;
            let routePromises = [];
            for (let i = 0; i < coordinates.length - 1; i++) {
                const start = coordinates[i];
                const end = coordi
